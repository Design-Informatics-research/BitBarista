{% extends "index.html" %}
{% block content %}

<div class="row" id="offers">
  <div class="col-sm-offset-1 col-sm-10">
    <h2><span class="input">Which coffee would you like?</span></h2>
    {% if message %}<p>{{ message }}</p>{% endif %}
    
    {% for key,offer in offers %}
      {% if ((loop.index0%2)==0) %}<div class="row">{% endif %}
        <div class="col-sm-5">
          <a class="touch-button" href="/serve/{{ key }}">
          <span class="input">{{ offer["name"] }}</span><br/>
          <span class="input_u">Match: {{ offer["match"] }}</span><br/>
          </a>
        </div>
      {% if ((loop.index0%2)!=0) %}</div>{% endif %}
    {% else %}
      <div class="col-sm-5"><em>No offers available</em></div>
    {% endfor %}

  </div>
    
  <img src="assets/cup_placement.png"/>
</div>

{% endblock %}

{% block javascript %}
<script>
$(document).ready(function(){
  var timeoot = 0;

  function poll() { 
    setTimeout(function() {
      $.ajax({ 
        url: "{{ state_url }}", 
        success: stateCallback, 
        complete: function(){ timeoot = 6000; poll(); } 
      });
    }, timeoot);
  }

  poll();
});
</script>
{% endblock %}
